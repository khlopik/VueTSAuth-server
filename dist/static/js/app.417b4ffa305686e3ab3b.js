webpackJsonp([1],{"+ro/":function(t,e){},"4q9H":function(t,e){},"7zck":function(t,e){},"9R/n":function(t,e){},"9Rz0":function(t,e){},CR7k:function(t,e){},FhoZ:function(t,e,a){"use strict";(function(e){const s=a("o/zv");t.exports={dev:{assetsSubDirectory:"static",assetsPublicPath:"/",proxyTable:{},host:"localhost",port:8080,autoOpenBrowser:!1,errorOverlay:!0,notifyOnErrors:!0,poll:!1,useEslint:!0,showEslintErrorsInOverlay:!1,devtool:"cheap-module-eval-source-map",cacheBusting:!0,cssSourceMap:!0},build:{index:s.resolve(e,"../dist/index.html"),assetsRoot:s.resolve(e,"../dist"),assetsSubDirectory:"static",assetsPublicPath:"/",productionSourceMap:!0,devtool:"#source-map",productionGzip:!1,productionGzipExtensions:["js","css"],bundleAnalyzerReport:Object({NODE_ENV:"production"}).npm_config_report}}}).call(e,"/")},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("7zck");var s=a("7+uW"),n=a("3EgV"),r=a.n(n),i=a("ESwS"),o=a.n(i),c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var u=a("VU/8")({name:"App"},c,!1,function(t){a("4q9H")},null,null).exports,l=a("/ocq"),d=a("Dd8w"),_=a.n(d),v=a("NYxO"),E=(a("sax8"),a("bOdI")),m=a.n(E),h=a("2aIq"),f=a.n(h),S=a("//Fk"),p=a.n(S),U=a("mvHQ"),R=a.n(U),g=a("mtWM"),A=a.n(g),T=a("FhoZ"),C=a.n(T),D=a("rBKV"),O=a.n(D),w=a("dhIU"),b=a.n(w);console.log("config: ",C.a),console.log("prod: ",O.a),console.log("dev: ",b.a),console.log("process.env: ",Object({NODE_ENV:"production"}));var L=Object({NODE_ENV:"production"}).APIENDPOINT||location.protocol+"//"+location.hostname+":8081";console.log("server: ",L);var I,G,N,P=function(){var t=JSON.parse(localStorage.getItem("authUser"));return{headers:{"x-auth":t&&t.token?t.token:""}}},V=function(t){localStorage.setItem("authUser",R()({email:t.data.email,token:t.headers["x-auth"],access:t.data.access}))},x=function(){return new p.a(function(t,e){A.a.get(L+"/auth/me",P()).then(function(e){t(e)}).catch(function(t){console.log("error: ",t),localStorage.removeItem("authUser"),e(t)})})},$={SET_LOGGED_IN:"SET_LOGGED_IN",SET_USER_URL:"SET_USER_URL",SET_USER_ACCESS:"SET_USER_ACCESS",UPDATE_USER_DETAILS:"UPDATE_USER_DETAILS",CLEAR_USER_AVATAR:"CLEAR_USER_AVATAR",SAVE_USERS_TO_STORE:"SAVE_USERS_TO_STORE",UPDATE_USER_ACCESS:"UPDATE_USER_ACCESS"},k={SET_LOGGED_IN:"SET_LOGGED_IN",SET_USER_URL:"SET_USER_URL",CHECK_LOGIN_ON_SERVER:"CHECK_LOGIN_ON_SERVER",LOGOUT_USER:"LOGOUT_USER",UPDATE_USER_DETAILS_ON_SERVER:"UPDATE_USER_DETAILS_ON_SERVER",CLEAR_USER_AVATAR:"CLEAR_USER_AVATAR",REMOVE_USER_ACCOUNT:"REMOVE_USER_ACCOUNT",GET_USERS_FROM_SERVER:"GET_USERS_FROM_SERVER",UPDATE_USER_ACCESS:"UPDATE_USER_ACCESS"},y={IS_LOGGED_IN:"IS_LOGGED_IN",GET_USER_URL:"GET_USER_URL",GET_USER_ACCESS:"GET_USER_ACCESS",GET_USER_DETAILS:"GET_USER_DETAILS",GET_USER_AVATAR:"GET_USER_AVATAR",GET_ALL_USERS:"GET_ALL_USERS"},F={action:k,mutation:$,getter:y},j=(I={},m()(I,k.SET_LOGGED_IN,function(t,e){(0,t.commit)($.SET_LOGGED_IN,e)}),m()(I,k.SET_USER_URL,function(t,e){(0,t.commit)($.SET_USER_URL,e)}),m()(I,k.CHECK_LOGIN_ON_SERVER,function(t){var e=t.commit;return new p.a(function(t,a){var s=JSON.parse(localStorage.getItem("authUser"));s&&s.token?x(s.token).then(function(a){e($.SET_LOGGED_IN,!0),e($.UPDATE_USER_DETAILS,{data:a.data}),t()}).catch(function(t){e($.SET_LOGGED_IN,!1),a()}):(e($.SET_LOGGED_IN,!1),t())})}),m()(I,k.LOGOUT_USER,function(t){var e=t.commit;localStorage.removeItem("authUser"),e($.SET_USER_ACCESS,""),e($.SET_LOGGED_IN,!1)}),m()(I,k.UPDATE_USER_DETAILS_ON_SERVER,function(t,e){var a=t.commit,s=e.userId,n=e.details;return function(t,e){return new p.a(function(a,s){A.a.patch(L+"/users/"+t,e,P()).then(function(t){a(t)}).catch(function(t){console.log("error: ",t),s(t)})})}(s,n).then(function(t){a($.UPDATE_USER_DETAILS,{userId:s,data:t.data}),p.a.resolve()}).catch(function(t){console.log("error: ",t),p.a.reject(t)})}),m()(I,k.CLEAR_USER_AVATAR,function(t,e){(0,t.commit)($.CLEAR_USER_AVATAR,e)}),m()(I,k.REMOVE_USER_ACCOUNT,function(t,e){return f()(t),function(t){return new p.a(function(e,a){A.a.delete(L+"/users/"+t,P()).then(function(t){e(t)}).catch(function(t){console.log("error: ",t),a(t)})})}(e).then(function(t){p.a.resolve(t)}).catch(function(t){p.a.reject(t)})}),m()(I,k.GET_USERS_FROM_SERVER,function(t){var e=t.commit;new p.a(function(t,e){A.a.get(L+"/users",P()).then(function(e){t(e)}).catch(function(t){console.log("error: ",t),e(t)})}).then(function(t){e($.SAVE_USERS_TO_STORE,t.data)}).catch(function(t){console.log("error: ",t)})}),m()(I,k.UPDATE_USER_ACCESS,function(t,e){var a=t.commit,s=e.userId,n=e.access;(function(t,e){return new p.a(function(a,s){A.a.patch(L+"/users/access/"+t,{access:e},P()).then(function(t){a(t)}).catch(function(t){console.log("error: ",t),s(t)})})})(s,n).then(function(t){a($.UPDATE_USER_ACCESS,{userId:s,access:t.data.access})}).catch(function(t){console.log("error: ",t)})}),I),M=a("M4fF"),q=a.n(M),H=Object({NODE_ENV:"production"}).APIENDPOINT||location.protocol+"//"+location.hostname+":8081",z=(G={},m()(G,$.SET_LOGGED_IN,function(t,e){t.isLoggedIn=e}),m()(G,$.SET_USER_URL,function(t,e){t.userUrl=e}),m()(G,$.SET_USER_ACCESS,function(t,e){t.userAccess=e}),m()(G,$.UPDATE_USER_DETAILS,function(t,e){var a=e.userId,s=e.data;a&&a!==t.userId||(t.userAccess=s.access,t.details.name=s.details.name,t.details.email=s.email,t.userId=s._id,t.details.avatar=H+"/"+s.details.avatar),t.users=q.a.map(t.users,function(t){return t._id===a?_()({},t,{details:_()({},t.details,{name:s.details.name,avatar:H+"/"+s.details.avatar})}):t})}),m()(G,$.CLEAR_USER_AVATAR,function(t,e){if(e){e===t.userId&&(t.details.avatar=H+"/images/unauth/unknown.png");var a=q.a.map(t.users,function(t){return t._id===e?_()({},t,{details:_()({},t.details,{avatar:H+"/images/unauth/unknown.png"})}):t});t.users=a}else t.details.avatar=H+"/images/unauth/unknown.png"}),m()(G,$.SAVE_USERS_TO_STORE,function(t,e){t.users=q.a.map(e,function(t){return _()({},t,{details:_()({},t.details,{avatar:H+"/"+t.details.avatar})})})}),m()(G,$.UPDATE_USER_ACCESS,function(t,e){var a=e.userId,s=e.access;a===t.userId?t.access=s:t.users=q.a.map(t.users,function(t){return t._id===a?_()({},t,{access:s}):t})}),G),B=(N={},m()(N,y.IS_LOGGED_IN,function(t){return t.auth.isLoggedIn}),m()(N,y.GET_USER_URL,function(t){return t.auth.userUrl}),m()(N,y.GET_USER_ACCESS,function(t){return t.auth.userAccess}),m()(N,y.GET_USER_DETAILS,function(t){return{access:t.auth.userAccess,name:t.auth.details.name,avatar:t.auth.details.avatar,email:t.auth.details.email,id:t.auth.userId}}),m()(N,y.GET_USER_AVATAR,function(t){return function(t){}}),m()(N,y.GET_ALL_USERS,function(t){return q.a.map(t.auth.users,function(t){return{name:t.details.name,avatar:t.details.avatar,email:t.email,id:t._id,access:t.access}})}),N),K={state:{userId:null,isLoggedIn:!1,userUrl:"",userAccess:"",details:{email:null,name:"",avatar:null},users:[]},actions:j,mutations:z},J=F,W=_()({},B),Y={auth:K};s.a.use(v.a);var Z=new v.a.Store({modules:Y,getters:W,plugins:[]}),Q={name:"Header",computed:_()({},Object(v.c)({isLoggedIn:J.getter.IS_LOGGED_IN,userDetails:J.getter.GET_USER_DETAILS})),methods:_()({},Object(v.b)({logout:J.action.LOGOUT_USER}),{loginUser:function(){this.isLoggedIn?this.logout():this.$router.push("/auth/login")}})},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("v-toolbar",{attrs:{color:"yellow"}},[a("v-toolbar-side-icon"),t._v(" "),a("v-toolbar-title",[t._v("Vue Application + Node.js & MongoDB + Authorisation")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[a("v-btn",{attrs:{flat:""},nativeOn:{click:function(e){return t.loginUser(e)}}},[t._v(t._s(t.isLoggedIn?"Log out ("+(t.userDetails.name||t.userDetails.email)+")":"log in / Sign up"))])],1)],1)],1)},staticRenderFns:[]};var tt=a("VU/8")(Q,X,!1,function(t){a("9Rz0")},"data-v-c0811f08",null).exports,et={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("v-footer",{staticClass:"pa-3",attrs:{color:"yellow"}},[e("v-spacer"),this._v(" "),e("div",[this._v("Â© "+this._s((new Date).getFullYear())+" by Oleksii Khlopotov")])],1)],1)},staticRenderFns:[]};var at=a("VU/8")({name:"Footer"},et,!1,function(t){a("yEwv")},"data-v-b7d703f4",null).exports,st={name:"UserDetails",props:{userDetails:{type:Object,required:!0}},data:function(){return{name:this.userDetails.name,avatarChanged:!1,savingStatus:0,formData:new FormData}},computed:_()({},Object(v.c)({userAccess:J.getter.GET_USER_ACCESS}),{isInitial:function(){return 0===this.savingStatus},isSaving:function(){return 1===this.savingStatus},isSuccess:function(){return 2===this.savingStatus},isFailed:function(){return 3===this.savingStatus},formChanged:function(){return this.avatarChanged||this.name!==this.userDetails.name}}),methods:_()({},Object(v.b)({updateDetails:J.action.UPDATE_USER_DETAILS_ON_SERVER,clearUserAvatar:J.action.CLEAR_USER_AVATAR,removeUserAccount:J.action.REMOVE_USER_ACCOUNT,updateUserAccess:J.action.UPDATE_USER_ACCESS}),{saveUserDetails:function(){var t=this;this.formData.append("name",this.name),console.log("this.formData: ",this.formData),this.savingStatus=1,this.updateDetails({userId:this.userDetails.id,details:this.formData}).then(function(){t.savingStatus=2,t.avatarChanged=!1}).catch(function(){t.savingStatus=3})},saveForm:function(t){if(t.length){this.formData.append("avatar",t[0],t[0].name);var e=new FileReader,a=this;e.onload=function(t){a.$refs.avatar.src=t.target.result},e.readAsDataURL(t[0]),this.savingStatus=0,this.avatarChanged=!0}},clearAvatar:function(){this.clearUserAvatar(this.userDetails.id),this.savingStatus=0,this.formData.append("avatar",""),this.avatarChanged=!0},inputChange:function(t){this.name=t}})},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-details"},[a("v-form",{staticClass:"user-form",attrs:{enctype:"multipart/form-data"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs4:""}},[a("v-subheader",[t._v("E-mail:")])],1),t._v(" "),a("v-flex",{attrs:{xs8:""}},[a("v-text-field",{ref:"email",staticClass:"user-form-input",attrs:{disabled:"",name:"email",label:"E-mail address",value:t.userDetails.email}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs4:""}},[a("v-subheader",[t._v("User name:")])],1),t._v(" "),a("v-flex",{attrs:{xs8:""}},[a("v-text-field",{ref:"name",attrs:{name:"name",label:"User name",value:t.userDetails.name},on:{input:function(e){t.inputChange(e)}}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs4:""}},[a("v-subheader",[t._v("Avatar:")]),t._v(" "),a("div",{staticClass:"avatar-buttons"},[a("label",{staticClass:"avatar-label"},[a("input",{staticClass:"avatar-file",attrs:{type:"file",name:"file"},on:{change:function(e){t.saveForm(e.target.files),t.accept="image/*"}}}),t._v("\n\t\t\t\t\t\t\tLoad image\n\t\t\t\t\t\t")]),t._v(" "),a("v-btn",{staticClass:"avatar-clear",attrs:{color:"warning"},on:{click:t.clearAvatar}},[t._v("Clear avatar")])],1)],1),t._v(" "),a("v-flex",{staticClass:"avatar-image",attrs:{xs8:""}},[a("img",{ref:"avatar",staticClass:"user-avatar",attrs:{src:t.userDetails.avatar,alt:"avatar"}})])],1),t._v(" "),a("v-layout",{attrs:{row:""}})],1),t._v(" "),a("div",{staticClass:"form-buttons"},["Admin"===t.userAccess?a("v-btn",{attrs:{color:"info"},on:{click:function(e){t.updateUserAccess({userId:t.userDetails.id,access:"Resident"===t.userDetails.access?"Admin":"Resident"})}}},[t._v("\n\t\t\t\t"+t._s("Resident"===t.userDetails.access?"Set":"Remove")+" Admin rights\n\t\t\t")]):t._e(),t._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:function(e){t.removeUserAccount(t.userDetails.id)}}},[t._v("Delete account")]),t._v(" "),a("v-btn",{attrs:{color:"success",disabled:!t.formChanged},on:{click:t.saveUserDetails}},[t._v("Save")])],1)],1)},staticRenderFns:[]};var rt=a("VU/8")(st,nt,!1,function(t){a("+ro/")},"data-v-c5950418",null).exports,it={name:"admin-page",components:{UserDetails:rt},computed:_()({},Object(v.c)({users:J.getter.GET_ALL_USERS,userDetails:J.getter.GET_USER_DETAILS})),methods:_()({},Object(v.b)({getUsers:J.action.GET_USERS_FROM_SERVER})),mounted:function(){this.getUsers()}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin"},[t._m(0),t._v(" "),a("v-expansion-panel",{staticClass:"userlist",attrs:{popout:""}},[a("h2",[t._v("User list:")]),t._v(" "),t._l(t.users,function(e){return a("v-expansion-panel-content",{key:e.email,staticClass:"user-panel"},[a("div",{staticClass:"user-header",attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\t\t\t"+t._s(e.email+(e.id===t.userDetails.id?" (Current user)":""))+"\n\t\t\t\t\t"),a("span",{class:"user-access"+("Resident"===e.access?"":" user-admin")},[t._v(t._s(e.access))])]),t._v(" "),a("user-details",{staticClass:"user-details",attrs:{userDetails:e}})],1)})],2)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"admin-title"},[e("h1",[this._v("Hello on Admin page")])])}]};var ct=a("VU/8")(it,ot,!1,function(t){a("eiG0")},"data-v-36d108dd",null).exports,ut={name:"resident-page",components:{UserDetails:rt},data:function(){return{email:""}},computed:_()({},Object(v.c)({userDetails:J.getter.GET_USER_DETAILS})),mounted:function(){var t=this;x(JSON.parse(localStorage.getItem("authUser")).token).then(function(e){t.email=e.data.email}).catch(function(){return"Cannot find user information"})}},lt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"resident"},[this._m(0),this._v(" "),e("div",{staticClass:"resident-details"},[e("h2",[this._v("Your details:")]),this._v(" "),e("user-details",{staticClass:"resident-user",attrs:{userDetails:this.userDetails}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"resident-title"},[e("h1",[this._v("Hello on Resident page")])])}]};var dt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"unauth"},[a("div",{staticClass:"unauth-title"},[a("h1",[t._v("Hello on Unauthorized page")])]),t._v(" "),a("h2",[t._v("Information:")]),t._v(" "),a("p",[t._v("This is example project which uses such technologies:")]),t._v(" "),a("ul",[a("li",[t._v("Frontend: Vue, Vuex, routes")]),t._v(" "),a("li",[t._v("Backend: Node.js + express, MongoDB + Mongoose")])]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("Please login as a user or create new user account")]),t._v(" "),a("p",[t._v("To access admin page use these credentials: admin@example.com/Password")])])}]};var _t={name:"Main",components:{AdminPage:ct,ResidentPage:a("VU/8")(ut,lt,!1,function(t){a("bb26")},"data-v-7ec11296",null).exports,UnauthorizedPage:a("VU/8")({name:"UnauthorizedPage"},dt,!1,function(t){a("lEOB")},"data-v-02b87b3f",null).exports,Header:tt,Footer:at},data:function(){return{msg:"Welcome my dear friend"}},computed:_()({},Object(v.c)({isLoggedIn:J.getter.IS_LOGGED_IN,userAccess:J.getter.GET_USER_ACCESS}),{userComponent:function(){return this.isLoggedIn?"Admin"===this.userAccess?"AdminPage":"Resident"===this.userAccess?"ResidentPage":"":"UnauthorizedPage"}}),methods:_()({},Object(v.b)({checkAuthorisation:J.action.CHECK_LOGIN_ON_SERVER})),beforeMount:function(){this.checkAuthorisation().catch(function(t){console.log("e: ",t)})}},vt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[e("v-app",{attrs:{id:"inspire"}},[e("Header"),this._v(" "),e(this.userComponent,{tag:"component"}),this._v(" "),e("Footer")],1)],1)},staticRenderFns:[]};var Et=a("VU/8")(_t,vt,!1,function(t){a("dl+l")},"data-v-403e675d",null).exports,mt={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"posts"})},staticRenderFns:[]};var ht=a("VU/8")({name:"posts"},mt,!1,function(t){a("CR7k")},"data-v-2f54d2a8",null).exports,ft=a("+cKO"),St={name:"LoginPage",data:function(){return{email:"",password:"",confirmPassword:"",newUser:!1,authFailed:!1}},validations:function(){var t={email:{required:ft.required,email:ft.email},password:{required:ft.required,minLength:Object(ft.minLength)(8)}};return this.newUser&&(t=_()({},t,{confirmPassword:{required:ft.required,sameAsPassword:Object(ft.sameAs)("password")}})),t},computed:_()({},Object(v.c)({initialUserUrl:J.getter.GET_USER_URL}),{emailErrors:function(){var t=[];return this.$v.email.$dirty?(!this.$v.email.email&&t.push("Must be valid e-mail"),!this.$v.email.required&&t.push("E-mail is required"),t):t},passwordErrors:function(){var t=[];return this.$v.password.$dirty?(!this.$v.password.required&&t.push("Password is required"),!this.$v.password.minLength&&t.push("Password should be at least 8 characters"),this.authFailed&&t.push("Username or password is incorrect!"),t):t},confirmPasswordErrors:function(){var t=[];return this.$v.confirmPassword.$dirty?(!this.$v.confirmPassword.required&&t.push("Confirm password is required"),!this.$v.confirmPassword.sameAsPassword&&t.push("Passwords must be identical"),t):t}}),methods:{loginUser:function(){var t,e,a=this;(t=this.email,e=this.password,new p.a(function(a,s){console.log("host",L),A.a.post(L+"/auth/login",{email:t,password:e}).then(function(t){V(t),a(t.data)}).catch(function(t){console.log("error: ",t),s(t)})})).then(function(){a.$router.push("/")}).catch(function(){a.authFailed=!0})},createUser:function(){var t,e,a=this;(t=this.email,e=this.password,new p.a(function(a,s){A.a.post(L+"/users",{email:t,password:e}).then(function(t){V(t),a(t.data)}).catch(function(t){console.log("error: ",t),s(t)})})).then(function(){a.$router.push("/")}).catch(function(){})}}},pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newUser?t.createUser():t.loginUser()}}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Login form")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-tooltip",{attrs:{bottom:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",large:"",target:"_blank"},slot:"activator"},[a("v-icon",{attrs:{large:""}},[t._v("code")])],1),t._v(" "),a("span",[t._v("Source")])],1)],1),t._v(" "),a("v-card-text",[a("v-form",[a("v-radio-group",{attrs:{column:!1,row:!0},on:{change:function(e){t.authFailed=!1}},model:{value:t.newUser,callback:function(e){t.newUser=e},expression:"newUser"}},[a("v-radio",{attrs:{label:"Existing user",value:!1}}),t._v(" "),a("v-radio",{attrs:{label:"New user",value:!0}})],1),t._v(" "),a("v-text-field",{attrs:{"prepend-icon":"person",name:"login",label:"Login",type:"text","error-messages":t.emailErrors},on:{input:function(e){t.$v.email.$touch(),t.authFailed=!1},blur:function(e){t.$v.email.$touch()}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),a("v-text-field",{attrs:{"prepend-icon":"lock",name:"password",label:"Password",id:"password",type:"password","error-messages":t.passwordErrors},on:{input:function(e){t.$v.password.$touch(),t.authFailed=!1},blur:function(e){t.$v.password.$touch()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),t.newUser?a("v-text-field",{attrs:{"prepend-icon":"lock",name:"confirm-password",label:"Confirm password",id:"password2",type:"password","error-messages":t.confirmPasswordErrors},on:{input:function(e){t.$v.confirmPassword.$touch()},blur:function(e){t.$v.confirmPassword.$touch()}},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}):t._e()],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",disabled:t.$v.$invalid},on:{click:function(e){e.preventDefault(),t.newUser?t.createUser():t.loginUser()}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.newUser?"Create":"Login"))])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Ut=a("VU/8")(St,pt,!1,function(t){a("9R/n")},"data-v-23d035ee",null).exports;s.a.use(l.a);var Rt=[{path:"/",name:"Main",component:Et,meta:{requiresAuth:!0}},{path:"/posts",name:"Posts",component:ht},{name:"login",path:"/auth/login",component:Ut}],gt=new l.a({mode:"history",routes:Rt});gt.beforeEach(function(t,e,a){Z.dispatch(J.action.CHECK_LOGIN_ON_SERVER);var s=JSON.parse(localStorage.getItem("authUser"));t.meta.requiresAuth?(s&&s.token,a()):a()});var At=gt;s.a.config.productionTip=!1,s.a.use(r.a),s.a.use(o.a),new s.a({store:Z,el:"#app",router:At,components:{App:u},template:"<App/>"})},bb26:function(t,e){},dhIU:function(t,e,a){"use strict";const s=a("2cg0"),n=a("rBKV");t.exports=s(n,{NODE_ENV:'"development"',APIENDPOINT:"localhost:8081"})},"dl+l":function(t,e){},eiG0:function(t,e){},lEOB:function(t,e){},rBKV:function(t,e,a){"use strict";t.exports={NODE_ENV:'"production"'}},yEwv:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.417b4ffa305686e3ab3b.js.map