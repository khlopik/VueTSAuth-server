webpackJsonp([1],{"1Hrm":function(e,t){},"7D5T":function(e,t){},"7zck":function(e,t){},CR7k:function(e,t){},"DV+a":function(e,t){},EueL:function(e,t){},Go53:function(e,t){},MyUj:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("7zck");var a=s("7+uW"),r=s("3EgV"),n=s.n(r),i=s("ESwS"),o=s.n(i),u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var c=s("VU/8")({name:"App"},u,!1,function(e){s("7D5T")},null,null).exports,E=s("/ocq"),l=s("Dd8w"),_=s.n(l),d=s("NYxO"),S=(s("sax8"),s("bOdI")),v=s.n(S),m=s("Xxa5"),f=s.n(m),h=s("exGp"),A=s.n(h),p=s("mtWM"),R=s.n(p);R.a.defaults.withCredentials=!0;var U,T,g,D,C,O,w,G,L,I,b,M,x,V,H=function(e){return R.a.post(_e.getters.HOST_ADDRESS+"/auth/login",e)},P=function(e,t){return R.a.post(_e.getters.HOST_ADDRESS+"/users",{email:e,password:t})},N=function(e,t){return R.a.patch(_e.getters.HOST_ADDRESS+"/users/"+e,t)},$=function(e,t){return R.a.patch(_e.getters.HOST_ADDRESS+"/users/access/"+e,{access:t})},y=function(e){return R.a.delete(_e.getters.HOST_ADDRESS+"/users/"+e)},F=function(e){return function(){return e.apply(void 0,arguments).catch(function(e){var t="",s="";e&&e.response&&e.response.status&&(t=e.response.status),e&&e.response&&e.response.data&&(s=e.response.data);var a={messageText:"Error occurred. "+(t?"Status: "+t+". ":"")+(s?"Message: "+s:""),messageType:"error"};_e.dispatch(ce.userMessages.action.SHOW_USER_MESSAGE,a)})}},k={SET_LOGGED_IN:"SET_LOGGED_IN",SET_USER_URL:"SET_USER_URL",SET_USER_ACCESS:"SET_USER_ACCESS",UPDATE_USER_DETAILS:"UPDATE_USER_DETAILS",CLEAR_USER_AVATAR:"CLEAR_USER_AVATAR",SAVE_USERS_TO_STORE:"SAVE_USERS_TO_STORE",UPDATE_USER_ACCESS:"UPDATE_USER_ACCESS",SET_DEFAULT_AVATAR:"SET_DEFAULT_AVATAR",SET_HOST_ADDRESS:"SET_HOST_ADDRESS"},j={LOGIN_BY_CREDENTIALS:"LOGIN_BY_CREDENTIALS",SET_LOGGED_IN:"SET_LOGGED_IN",SET_USER_URL:"SET_USER_URL",CHECK_LOGIN_ON_SERVER:"CHECK_LOGIN_ON_SERVER",LOGOUT_USER:"LOGOUT_USER",UPDATE_USER_DETAILS_ON_SERVER:"UPDATE_USER_DETAILS_ON_SERVER",CLEAR_USER_AVATAR:"CLEAR_USER_AVATAR",REMOVE_USER_ACCOUNT:"REMOVE_USER_ACCOUNT",GET_USERS_FROM_SERVER:"GET_USERS_FROM_SERVER",UPDATE_USER_ACCESS:"UPDATE_USER_ACCESS",REQUEST_HOST_ADDRESS:"REQUEST_HOST_ADDRESS",CREATE_USER:"CREATE_USER"},q={HOST_ADDRESS:"HOST_ADDRESS",IS_LOGGED_IN:"IS_LOGGED_IN",GET_USER_URL:"GET_USER_URL",GET_USER_ACCESS:"GET_USER_ACCESS",GET_USER_DETAILS:"GET_USER_DETAILS",GET_USER_AVATAR:"GET_USER_AVATAR",GET_ALL_USERS:"GET_ALL_USERS",GET_DEFAULT_AVATAR:"GET_DEFAULT_AVATAR"},Y={action:j,mutation:k,getter:q},B=this,W=(U={},v()(U,j.REQUEST_HOST_ADDRESS,function(e){var t=e.commit,s=location.host.includes("localhost")?location.protocol+"//"+location.hostname+":8081":location.protocol+"//"+location.hostname;t(k.SET_HOST_ADDRESS,s)}),v()(U,j.CHECK_LOGIN_ON_SERVER,F((L=A()(f.a.mark(function e(t){var s,a=t.commit;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get(_e.getters.HOST_ADDRESS+"/auth/me");case 2:s=e.sent,a(k.SET_LOGGED_IN,!0),a(k.UPDATE_USER_DETAILS,{data:s.data}),a(k.SET_DEFAULT_AVATAR,s.data.defaultAvatar);case 6:case"end":return e.stop()}},e,B)})),function(e){return L.apply(this,arguments)}))),v()(U,j.LOGIN_BY_CREDENTIALS,F((G=A()(f.a.mark(function e(t,s){var a,r=t.commit;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(s);case 2:a=e.sent,r(k.SET_LOGGED_IN,!0),r(k.UPDATE_USER_DETAILS,{data:a.data}),je.push("/");case 6:case"end":return e.stop()}},e,B)})),function(e,t){return G.apply(this,arguments)}))),v()(U,j.LOGOUT_USER,F((w=A()(f.a.mark(function e(t){var s=t.commit;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get(_e.getters.HOST_ADDRESS+"/logout");case 2:s(k.SET_USER_ACCESS,""),s(k.SET_LOGGED_IN,!1);case 4:case"end":return e.stop()}},e,B)})),function(e){return w.apply(this,arguments)}))),v()(U,j.CREATE_USER,F((O=A()(f.a.mark(function e(t,s){t.commit;var a=s.email,r=s.password;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(a,r);case 2:je.push("/");case 3:case"end":return e.stop()}},e,B)})),function(e,t){return O.apply(this,arguments)}))),v()(U,j.UPDATE_USER_DETAILS_ON_SERVER,(C=A()(f.a.mark(function e(t,s){var a,r=t.commit,n=s.userId,i=s.details;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(n,i);case 2:a=e.sent,r(k.UPDATE_USER_DETAILS,{userId:n,data:a.data});case 4:case"end":return e.stop()}},e,B)})),function(e,t){return C.apply(this,arguments)})),v()(U,j.CLEAR_USER_AVATAR,function(e,t){(0,e.commit)(k.CLEAR_USER_AVATAR,t)}),v()(U,j.REMOVE_USER_ACCOUNT,F((D=A()(f.a.mark(function e(t,s){var a=t.dispatch;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(s);case 2:a(j.GET_USERS_FROM_SERVER);case 3:case"end":return e.stop()}},e,B)})),function(e,t){return D.apply(this,arguments)}))),v()(U,j.GET_USERS_FROM_SERVER,F((g=A()(f.a.mark(function e(t){var s,a=t.commit;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get(_e.getters.HOST_ADDRESS+"/users");case 2:s=e.sent,a(k.SAVE_USERS_TO_STORE,s.data);case 4:case"end":return e.stop()}},e,B)})),function(e){return g.apply(this,arguments)}))),v()(U,j.UPDATE_USER_ACCESS,F((T=A()(f.a.mark(function e(t,s){var a,r=t.commit,n=s.userId,i=s.access;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(n,i);case 2:a=e.sent,r(k.UPDATE_USER_ACCESS,{userId:n,access:a.data.access});case 4:case"end":return e.stop()}},e,B)})),function(e,t){return T.apply(this,arguments)}))),U),z=s("M4fF"),K=s.n(z),Q=(I={},v()(I,k.SET_HOST_ADDRESS,function(e,t){e.hostAddress=t}),v()(I,k.SET_LOGGED_IN,function(e,t){e.isLoggedIn=t}),v()(I,k.SET_USER_URL,function(e,t){e.userUrl=t}),v()(I,k.SET_USER_ACCESS,function(e,t){e.userAccess=t}),v()(I,k.UPDATE_USER_DETAILS,function(e,t){var s=t.userId,a=t.data;s&&s!==e.userId||(e.userAccess=a.access,e.details.name=a.details.name,e.details.email=a.email,e.userId=a._id,e.details.avatar=""!==a.details.avatar?e.hostAddress+"/"+a.details.avatar:""),e.users=K.a.map(e.users,function(t){return t._id===s?(console.log("user: ",t),console.log("data.details: ",a.details),_()({},t,{details:_()({},t.details,{name:a.details.name,avatar:""!==a.details.avatar?e.hostAddress+"/"+a.details.avatar:""})})):t})}),v()(I,k.CLEAR_USER_AVATAR,function(e,t){if(t){t===e.userId&&(e.details.avatar="");var s=K.a.map(e.users,function(e){return e._id===t?_()({},e,{details:_()({},e.details,{avatar:""})}):e});e.users=s}else e.details.avatar=""}),v()(I,k.SAVE_USERS_TO_STORE,function(e,t){e.users=K.a.map(t,function(t){return _()({},t,{details:_()({},t.details,{avatar:""!==t.details.avatar?e.hostAddress+"/"+t.details.avatar:""})})})}),v()(I,k.UPDATE_USER_ACCESS,function(e,t){var s=t.userId,a=t.access;s===e.userId?e.access=a:e.users=K.a.map(e.users,function(e){return e._id===s?_()({},e,{access:a}):e})}),v()(I,k.SET_DEFAULT_AVATAR,function(e,t){e.defaultAvatar=e.hostAddress+"/"+t}),I),Z=(b={},v()(b,q.HOST_ADDRESS,function(e){return e.auth.hostAddress}),v()(b,q.IS_LOGGED_IN,function(e){return e.auth.isLoggedIn}),v()(b,q.GET_USER_URL,function(e){return e.auth.userUrl}),v()(b,q.GET_USER_ACCESS,function(e){return e.auth.userAccess}),v()(b,q.GET_USER_DETAILS,function(e){return{access:e.auth.userAccess,name:e.auth.details.name,avatar:e.auth.details.avatar,email:e.auth.details.email,id:e.auth.userId}}),v()(b,q.GET_USER_AVATAR,function(e){return function(e){}}),v()(b,q.GET_ALL_USERS,function(e){return K.a.map(e.auth.users,function(e){return{name:e.details.name,avatar:e.details.avatar,email:e.email,id:e._id,access:e.access}})}),v()(b,q.GET_DEFAULT_AVATAR,function(e){return e.auth.defaultAvatar}),b),J={state:{userId:null,isLoggedIn:!1,userUrl:"",userAccess:"",defaultAvatar:"",details:{email:null,name:"",avatar:null},users:[]},actions:W,mutations:Q},X=s("DtRx"),ee=s.n(X),te={ADD_USER_MESSAGE:"ADD_USER_MESSAGE",REMOVE_USER_MESSAGE:"REMOVE_USER_MESSAGE"},se={SHOW_USER_MESSAGE:"SHOW_USER_MESSAGE",HIDE_USER_MESSAGE:"HIDE_USER_MESSAGE"},ae={USER_MESSAGES:"USER_MESSAGES",AUTO_HIDE:"AUTO_HIDE",GET_HIDE_DELAY:"GET_HIDE_DELAY"},re={action:se,mutation:te,getter:ae},ne=(M={},v()(M,se.SHOW_USER_MESSAGE,function(e,t){var s=e.commit,a=e.getters,r=ee()();s(te.ADD_USER_MESSAGE,_()({},t,{id:r})),a.AUTO_HIDE&&setTimeout(function(){s(te.REMOVE_USER_MESSAGE,r)},a.GET_HIDE_DELAY)}),v()(M,se.HIDE_USER_MESSAGE,function(e,t){(0,e.commit)(te.REMOVE_USER_MESSAGE,t)}),M),ie=(x={},v()(x,te.ADD_USER_MESSAGE,function(e,t){e.messages.push(t)}),v()(x,te.REMOVE_USER_MESSAGE,function(e,t){e.messages=K.a.filter(e.messages,function(e){return e.id!==t})}),x),oe=(V={},v()(V,ae.USER_MESSAGES,function(e){return e.userMessages.messages}),v()(V,ae.AUTO_HIDE,function(e){return e.userMessages.autoHide}),v()(V,ae.GET_HIDE_DELAY,function(e){return e.userMessages.hideDelay}),V),ue={state:{messages:[],autoHide:!0,hideDelay:5e3},actions:ne,mutations:ie},ce={auth:Y,userMessages:re},Ee=_()({},Z,oe),le={auth:J,userMessages:ue};a.a.use(d.a);var _e=new d.a.Store({modules:le,getters:Ee,plugins:[]}),de={name:"Header",computed:_()({},Object(d.c)({isLoggedIn:ce.auth.getter.IS_LOGGED_IN,userDetails:ce.auth.getter.GET_USER_DETAILS})),methods:_()({},Object(d.b)({logout:ce.auth.action.LOGOUT_USER}),{loginUser:function(){this.isLoggedIn?this.logout():this.$router.push("/login")}})},Se={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("v-toolbar-side-icon",{staticClass:"header-icon"}),e._v(" "),s("h1",{staticClass:"header-title"},[e._v("Vue Application + Node.js & MongoDB + Authorization")]),e._v(" "),s("button",{staticClass:"header-login",on:{click:e.loginUser}},[e._v("\n\t\t\t"+e._s(e.isLoggedIn?"Log out ("+(e.userDetails.name||e.userDetails.email)+")":"log in / Sign up")+"\n\t\t")])],1)},staticRenderFns:[]};var ve=s("VU/8")(de,Se,!1,function(e){s("Go53")},"data-v-b802aad8",null).exports,me={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footer"},[t("div",{staticClass:"footer-copyright"},[this._v("© "+this._s((new Date).getFullYear())+" by Oleksii Khlopotov")])])},staticRenderFns:[]};var fe=s("VU/8")({name:"Footer"},me,!1,function(e){s("DV+a")},"data-v-fd7bbeb6",null).exports,he={name:"UserDetails",props:{userDetails:{type:Object,required:!0}},data:function(){return{name:this.userDetails.name,newAvatar:"",savingStatus:0,formData:new FormData}},computed:_()({},Object(d.c)({userAccess:ce.auth.getter.GET_USER_ACCESS,currentUser:ce.auth.getter.GET_USER_DETAILS,defaultAvatar:ce.auth.getter.GET_DEFAULT_AVATAR}),{isInitial:function(){return 0===this.savingStatus},isSaving:function(){return 1===this.savingStatus},isSuccess:function(){return 2===this.savingStatus},isFailed:function(){return 3===this.savingStatus},formChanged:function(){return this.name!==this.userDetails.name||this.newAvatar||this.formData.has("avatar")}}),methods:_()({},Object(d.b)({updateDetails:ce.auth.action.UPDATE_USER_DETAILS_ON_SERVER,clearUserAvatar:ce.auth.action.CLEAR_USER_AVATAR,removeUserAccount:ce.auth.action.REMOVE_USER_ACCOUNT,updateUserAccess:ce.auth.action.UPDATE_USER_ACCESS}),{saveUserDetails:function(){var e=this;this.name!==this.userDetails.name&&this.formData.append("name",this.name),this.savingStatus=1,this.updateDetails({userId:this.userDetails.id,details:this.formData}).then(function(){e.savingStatus=2,e.formData=new FormData,e.newAvatar=""}).catch(function(){e.savingStatus=3,e.formData=new FormData})},saveForm:function(e){if(e.length){this.formData.delete("avatar"),this.formData.append("avatar",e[0],e[0].name);var t=new FileReader,s=this;t.onload=function(e){s.newAvatar=e.target.result},t.readAsDataURL(e[0]),this.savingStatus=0}},clearAvatar:function(){this.newAvatar="",this.$refs.updatedAvatar.value="",this.clearUserAvatar(this.userDetails.id),this.savingStatus=0,this.formData.append("avatar","")},inputChange:function(e){this.name=e},deleteAccount:function(e){var t=this;this.removeUserAccount(e).then(function(s){e===t.currentUser.id&&t.$router.go()}).catch(function(e){console.log("error: ",e)})},updateAccess:function(){var e=this;this.updateUserAccess({userId:this.userDetails.id,access:"Resident"===this.userDetails.access?"Admin":"Resident"}).then(function(){e.userDetails.id===e.currentUser.id&&e.$router.go()}).catch(function(e){console.log("error: ",e)})}})},Ae={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-details"},[s("v-form",{staticClass:"user-form",attrs:{enctype:"multipart/form-data"}},[s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs4:""}},[s("v-subheader",[e._v("E-mail:")])],1),e._v(" "),s("v-flex",{attrs:{xs8:""}},[s("v-text-field",{ref:"email",staticClass:"user-form-input",attrs:{disabled:"",name:"email",label:"E-mail address",value:e.userDetails.email}})],1)],1),e._v(" "),s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs4:""}},[s("v-subheader",[e._v("User name:")])],1),e._v(" "),s("v-flex",{attrs:{xs8:""}},[s("v-text-field",{ref:"name",attrs:{name:"name",label:"User name",value:e.userDetails.name},on:{input:function(t){e.inputChange(t)}}})],1)],1),e._v(" "),s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs4:""}},[s("v-subheader",[e._v("Avatar:")]),e._v(" "),s("div",{staticClass:"avatar-buttons"},[s("label",{class:"avatar-label"+(e.isSaving?" disabled":"")},[s("input",{ref:"updatedAvatar",staticClass:"avatar-file",attrs:{type:"file",name:"file",disabled:e.isSaving},on:{change:function(t){e.saveForm(t.target.files),e.accept="image/*"}}}),e._v("\n\t\t\t\t\t\t\tLoad image\n\t\t\t\t\t\t")]),e._v(" "),s("v-btn",{staticClass:"avatar-clear",attrs:{color:"warning",disabled:!e.userDetails.avatar&&!e.newAvatar||e.isSaving},on:{click:e.clearAvatar}},[e._v("Clear avatar")])],1)],1),e._v(" "),s("v-flex",{staticClass:"avatar-image",attrs:{xs8:""}},[s("img",{ref:"avatar",staticClass:"user-avatar",attrs:{src:e.newAvatar||e.userDetails.avatar||e.defaultAvatar,alt:"avatar"}})])],1),e._v(" "),s("v-layout",{attrs:{row:""}})],1),e._v(" "),s("div",{staticClass:"form-buttons"},["Admin"===e.userAccess?s("v-btn",{attrs:{color:"info"},on:{click:e.updateAccess}},[e._v("\n\t\t\t\t"+e._s("Resident"===e.userDetails.access?"Set":"Remove")+" Admin rights\n\t\t\t")]):e._e(),e._v(" "),s("v-btn",{attrs:{color:"error"},on:{click:function(t){e.deleteAccount(e.userDetails.id)}}},[e._v("Delete account")]),e._v(" "),s("v-btn",{attrs:{color:"success",disabled:!e.formChanged||e.isSaving},on:{click:e.saveUserDetails}},[e._v("Save")])],1)],1)},staticRenderFns:[]};var pe=s("VU/8")(he,Ae,!1,function(e){s("1Hrm")},"data-v-3d889390",null).exports,Re={name:"admin-page",components:{UserDetails:pe},computed:_()({},Object(d.c)({users:ce.auth.getter.GET_ALL_USERS,userDetails:ce.auth.getter.GET_USER_DETAILS})),methods:_()({},Object(d.b)({getUsers:ce.auth.action.GET_USERS_FROM_SERVER})),mounted:function(){this.getUsers()}},Ue={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"admin"},[e._m(0),e._v(" "),s("v-expansion-panel",{staticClass:"userlist",attrs:{popout:""}},[s("h2",[e._v("User list:")]),e._v(" "),e._l(e.users,function(t){return s("v-expansion-panel-content",{key:t.email,staticClass:"user-panel"},[s("div",{staticClass:"user-header",attrs:{slot:"header"},slot:"header"},[e._v("\n\t\t\t\t\t"+e._s(t.email+(t.id===e.userDetails.id?" (Current user)":""))+"\n\t\t\t\t\t"),s("span",{class:"user-access"+("Resident"===t.access?"":" user-admin")},[e._v(e._s(t.access))])]),e._v(" "),s("user-details",{staticClass:"user-details",attrs:{userDetails:t}})],1)})],2)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"admin-title"},[t("h1",[this._v("Hello on Admin page")])])}]};var Te=s("VU/8")(Re,Ue,!1,function(e){s("eiG0")},"data-v-36d108dd",null).exports,ge={name:"resident-page",components:{UserDetails:pe},data:function(){return{email:""}},computed:_()({},Object(d.c)({userDetails:ce.auth.getter.GET_USER_DETAILS})),mounted:function(){}},De={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"resident"},[this._m(0),this._v(" "),t("div",{staticClass:"resident-details"},[t("h2",[this._v("Your details:")]),this._v(" "),t("user-details",{staticClass:"resident-user",attrs:{userDetails:this.userDetails}})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"resident-title"},[t("h1",[this._v("Hello on Resident page")])])}]};var Ce=s("VU/8")(ge,De,!1,function(e){s("Tu2Z")},"data-v-2e7a6b2e",null).exports,Oe={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"unauth"},[s("div",{staticClass:"unauth-title"},[s("h1",[e._v("Hello on Unauthorized page")])]),e._v(" "),s("h2",[e._v("Information:")]),e._v(" "),s("p",[e._v("This is example project which uses such technologies:")]),e._v(" "),s("ul",[s("li",[e._v("Frontend: Vue, Vuex, routes")]),e._v(" "),s("li",[e._v("Backend: Node.js + express, MongoDB + Mongoose")])]),e._v(" "),s("br"),e._v(" "),s("p",[e._v("Please login as a user or create new user account")]),e._v(" "),s("p",[e._v("To access admin page use these credentials: admin@example.com/Password")])])}]};var we=s("VU/8")({name:"UnauthorizedPage"},Oe,!1,function(e){s("lEOB")},"data-v-02b87b3f",null).exports,Ge={name:"UserMessages",data:function(){return{alert:!0}},computed:_()({},Object(d.c)({userMessages:ce.userMessages.getter.USER_MESSAGES})),methods:_()({},Object(d.b)({hideMessage:ce.userMessages.action.HIDE_USER_MESSAGE})),mounted:function(){console.log("this.userMessages: ",this.userMessages)},updated:function(){console.log("this.userMessages: ",this.userMessages)}},Le={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},e._l(e.userMessages,function(t){return s("v-alert",{key:t.id,attrs:{type:t.messageType,dismissible:"",value:"true",transition:"scale-transition"},on:{click:function(s){e.hideMessage(t.id)}}},[e._v("\n\t\t"+e._s(t.messageText)+"\n\t")])}))},staticRenderFns:[]};var Ie={name:"Main",components:{AdminPage:Te,ResidentPage:Ce,UnauthorizedPage:we,Header:ve,Footer:fe,UserMessages:s("VU/8")(Ge,Le,!1,function(e){s("iH9F")},"data-v-3c230f93",null).exports},data:function(){return{msg:"Welcome my dear friend"}},computed:_()({},Object(d.c)({isLoggedIn:ce.auth.getter.IS_LOGGED_IN,userAccess:ce.auth.getter.GET_USER_ACCESS}),{userComponent:function(){return this.isLoggedIn?"Admin"===this.userAccess?"AdminPage":"Resident"===this.userAccess?"ResidentPage":"":"UnauthorizedPage"}}),methods:_()({},Object(d.b)({checkAuthorisation:ce.auth.action.CHECK_LOGIN_ON_SERVER,requestHostAddress:ce.auth.action.REQUEST_HOST_ADDRESS,addMessage:ce.userMessages.action.SHOW_USER_MESSAGE})),beforeMount:function(){this.checkAuthorisation()}},be={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("v-app",{attrs:{id:"inspire"}},[t("div",{staticClass:"main"},[t("Header",{staticClass:"header"}),this._v(" "),t(this.userComponent,{tag:"component",staticClass:"content"}),this._v(" "),t("user-messages",{staticClass:"user-messages"}),this._v(" "),t("Footer",{staticClass:"footer"})],1)])],1)},staticRenderFns:[]};var Me=s("VU/8")(Ie,be,!1,function(e){s("EueL")},"data-v-0dd6e36e",null).exports,xe={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"posts"})},staticRenderFns:[]};s("VU/8")({name:"posts"},xe,!1,function(e){s("CR7k")},"data-v-2f54d2a8",null).exports;var Ve=s("Gu7T"),He=s.n(Ve),Pe=s("+cKO"),Ne={name:"LoginPage",data:function(){return{email:"",password:"",confirmPassword:"",newUser:!1,customError:""}},validations:function(){var e={email:{required:Pe.required,email:Pe.email},password:{required:Pe.required,minLength:Object(Pe.minLength)(8)}};return this.newUser&&(e=_()({},e,{confirmPassword:{required:Pe.required,sameAsPassword:Object(Pe.sameAs)("password")}})),e},computed:_()({},Object(d.c)({initialUserUrl:ce.auth.getter.GET_USER_URL,userMessages:ce.userMessages.getter.USER_MESSAGES}),{emailErrors:function(){var e=[];return this.$v.email.$dirty?(!this.$v.email.email&&e.push("Must be valid e-mail"),!this.$v.email.required&&e.push("E-mail is required"),e):e},passwordErrors:function(){var e=this.newUser?[]:this.userMessages.map(function(e){return e.messageText}),t=[];return this.$v.password.$dirty?(t=[].concat(He()(e)),!this.$v.password.required&&t.push("Password is required"),!this.$v.password.minLength&&t.push("Password should be at least 8 characters"),this.customError&&t.push(this.customError),t):t},confirmPasswordErrors:function(){var e=this.newUser?this.userMessages.map(function(e){return e.messageText}):[],t=[];return this.$v.confirmPassword.$dirty?(t=[].concat(He()(e)),!this.$v.confirmPassword.required&&t.push("Confirm password is required"),!this.$v.confirmPassword.sameAsPassword&&t.push("Passwords must be identical"),t):t}}),methods:_()({},Object(d.b)({login:ce.auth.action.LOGIN_BY_CREDENTIALS,createUser:ce.auth.action.CREATE_USER}),{createNewUser:function(){this.createUser({email:this.email,password:this.password})},loginUser:function(){this.login({email:this.email,password:this.password})}})},$e={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{attrs:{id:"inspire"}},[s("v-content",[s("v-container",{attrs:{fluid:"","fill-height":""},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;!e.$v.$invalid&&(e.newUser?e.createNewUser():e.loginUser())}}},[s("v-layout",{attrs:{"align-center":"","justify-center":""}},[s("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[s("v-card",{staticClass:"elevation-12"},[s("v-toolbar",{attrs:{dark:"",color:"primary"}},[s("v-toolbar-title",[e._v("Login form")]),e._v(" "),s("v-spacer"),e._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{attrs:{slot:"activator",icon:"",large:"",target:"_blank"},slot:"activator"},[s("v-icon",{attrs:{large:""}},[e._v("code")])],1),e._v(" "),s("span",[e._v("Source")])],1)],1),e._v(" "),s("v-card-text",[s("v-form",[s("v-radio-group",{attrs:{column:!1,row:!0},on:{change:function(t){e.customError=""}},model:{value:e.newUser,callback:function(t){e.newUser=t},expression:"newUser"}},[s("v-radio",{attrs:{label:"Existing user",value:!1}}),e._v(" "),s("v-radio",{attrs:{label:"New user",value:!0}})],1),e._v(" "),s("v-text-field",{attrs:{"prepend-icon":"person",name:"login",label:"Login",type:"text","error-messages":e.emailErrors},on:{input:function(t){e.$v.email.$touch(),e.customError=""},blur:function(t){e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("v-text-field",{attrs:{"prepend-icon":"lock",name:"password",label:"Password",id:"password",type:"password","error-messages":e.passwordErrors},on:{input:function(t){e.$v.password.$touch(),e.customError=""},blur:function(t){e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),e.newUser?s("v-text-field",{attrs:{"prepend-icon":"lock",name:"confirm-password",label:"Confirm password",id:"password2",type:"password","error-messages":e.confirmPasswordErrors},on:{input:function(t){e.$v.confirmPassword.$touch()},blur:function(t){e.$v.confirmPassword.$touch()}},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}}):e._e()],1)],1),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid},on:{click:function(t){t.preventDefault(),e.newUser?e.createNewUser:e.loginUser()}}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.newUser?"Create":"Login"))])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var ye=s("VU/8")(Ne,$e,!1,function(e){s("MyUj")},"data-v-7b590d82",null).exports;a.a.use(E.a);var Fe=[{path:"/",name:"Main",component:Me},{name:"login",path:"/login",component:ye}],ke=new E.a({mode:"history",routes:Fe});ke.beforeEach(function(e,t,s){s()});var je=ke;a.a.config.productionTip=!1,a.a.use(n.a),a.a.use(o.a);new a.a({store:_e,el:"#app",router:je,components:{App:c},template:"<App/>",beforeCreate:function(){_e.dispatch("REQUEST_HOST_ADDRESS").catch(function(e){console.log("error: ",e)})}})},Tu2Z:function(e,t){},eiG0:function(e,t){},iH9F:function(e,t){},lEOB:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bfcfecde20e4d2223949.js.map